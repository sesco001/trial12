<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Earn & Learn Hub</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f4f4f9; }
    header { background: linear-gradient(135deg,#4e54c8,#8f94fb); color: white; padding: 50px 20px; text-align: center; }
    header h1 { margin: 0; font-size: 2.5rem; }
    header p { margin-top: 10px; font-size: 1.2rem; }
    .container { max-width: 400px; margin: 30px auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
    form { display: flex; flex-direction: column; margin-bottom: 20px; }
    input { padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 6px; }
    button { padding: 12px; border: none; border-radius: 6px; background: #4e54c8; color: white; cursor: pointer; transition: 0.3s; }
    button:hover { background: #373dc5; }
  </style>
</head>
<body>
  <header>
    <h1>Earn & Learn Hub</h1>
    <p>Earn from assignments, access AI tools, and grow with referrals.</p>
  </header>

  <div class="container">
    <h2>Signup</h2>
    <form id="signup">
      <input name="name" placeholder="Name" required>
      <input name="email" placeholder="Email" type="email" required>
      <input name="password" placeholder="Password" type="password" required>
      <input name="ref" placeholder="Referral Code (optional)">
      <button type="submit">Signup</button>
    </form>

    <h2>Login</h2>
    <form id="login">
      <input name="email" placeholder="Email" type="email" required>
      <input name="password" placeholder="Password" type="password" required>
      <button type="submit">Login</button>
    </form>
  </div>

<script>
const API = 'https://breact.onrender.com/api';

// Signup
document.getElementById('signup').addEventListener('submit', async e => {
  e.preventDefault();
  const fd = new FormData(e.target);
  const body = {
    name: fd.get('name'),
    email: fd.get('email'),
    password: fd.get('password'),
    referral: fd.get('ref')
  };

  try {
    const res = await fetch(`${API}/auth/signup`, {
      method: 'POST',
      headers: { 'Content-Type':'application/json' },
      body: JSON.stringify(body)
    });
    const data = await res.json();
    if (data.token) {
      localStorage.setItem('token', data.token);
      window.location.href = 'dashboard.html';
    } else {
      alert(data.message || JSON.stringify(data));
    }
  } catch(err) {
    console.error(err);
    alert('Error connecting to server');
  }
});

// Login
document.getElementById('login').addEventListener('submit', async e => {
  e.preventDefault();
  const fd = new FormData(e.target);
  const body = { email: fd.get('email'), password: fd.get('password') };

  try {
    const res = await fetch(`${API}/auth/login`, {
      method: 'POST',
      headers: { 'Content-Type':'application/json' },
      body: JSON.stringify(body)
    });
    const data = await res.json();
    if (data.token) {
      localStorage.setItem('token', data.token);
      window.location.href = 'dashboard.html';
    } else {
      alert(data.message || JSON.stringify(data));
    }
  } catch(err) {
    console.error(err);
    alert('Error connecting to server');
  }
});
</script>
</body>
</html>

